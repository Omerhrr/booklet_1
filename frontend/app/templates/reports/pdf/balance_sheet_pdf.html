{% extends "reports/pdf/base_pdf.html" %}

{% block content %}
<div class="report-title">Statement of Financial Position</div>
<div class="report-period">As of: {{ report.as_of_date or now.strftime('%Y-%m-%d') }}</div>

<table style="width: 100%;">
    <tr>
        <!-- ASSETS COLUMN -->
        <td style="width: 50%; vertical-align: top; padding-right: 15px;">
            <h3 style="margin: 0 0 10px 0; font-size: 13px; color: #1a365d; border-bottom: 2px solid #1a365d; padding-bottom: 5px;">ASSETS</h3>
            
            <!-- Non-Current Assets -->
            <h4 style="margin: 10px 0 5px 0; font-size: 11px; color: #666; text-transform: uppercase;">Non-Current Assets</h4>
            <table style="width: 100%; margin-bottom: 5px;">
                <tr>
                    <td style="padding: 3px 0;">Fixed Assets (Cost)</td>
                    <td style="text-align: right; padding: 3px 0;">{{ "%.2f"|format(report.non_current_assets.fixed_assets_cost|float) }}</td>
                </tr>
                <tr>
                    <td style="padding: 3px 0 3px 15px; color: #666;">Less: Accumulated Depreciation</td>
                    <td style="text-align: right; padding: 3px 0; color: #dc2626;">({{ "%.2f"|format(report.non_current_assets.accumulated_depreciation|abs|float) }})</td>
                </tr>
                <tr style="border-top: 1px solid #ddd;">
                    <td style="padding: 3px 0; font-weight: 500;">Net Book Value</td>
                    <td style="text-align: right; padding: 3px 0; font-weight: 500;">{{ "%.2f"|format(report.non_current_assets.net_book_value|float) }}</td>
                </tr>
                {% if report.non_current_assets.other_non_current != 0 %}
                <tr>
                    <td style="padding: 3px 0;">Other Non-Current Assets</td>
                    <td style="text-align: right; padding: 3px 0;">{{ "%.2f"|format(report.non_current_assets.other_non_current|float) }}</td>
                </tr>
                {% endif %}
                <tr style="background-color: #f8fafc;">
                    <td style="padding: 5px 0; font-weight: 500;">Total Non-Current Assets</td>
                    <td style="text-align: right; padding: 5px 0; font-weight: 500;">{{ "%.2f"|format(report.non_current_assets.total|float) }}</td>
                </tr>
            </table>
            
            <!-- Current Assets -->
            <h4 style="margin: 15px 0 5px 0; font-size: 11px; color: #666; text-transform: uppercase;">Current Assets</h4>
            <table style="width: 100%; margin-bottom: 5px;">
                <tr>
                    <td style="padding: 3px 0;">Inventory</td>
                    <td style="text-align: right; padding: 3px 0;">{{ "%.2f"|format(report.current_assets.inventory|float) }}</td>
                </tr>
                <tr>
                    <td style="padding: 3px 0;">Accounts Receivable</td>
                    <td style="text-align: right; padding: 3px 0;">{{ "%.2f"|format(report.current_assets.accounts_receivable|float) }}</td>
                </tr>
                <tr>
                    <td style="padding: 3px 0;">VAT Receivable (Input VAT)</td>
                    <td style="text-align: right; padding: 3px 0;">{{ "%.2f"|format(report.current_assets.vat_receivable|float) }}</td>
                </tr>
                <tr>
                    <td style="padding: 3px 0;">Cash & Bank</td>
                    <td style="text-align: right; padding: 3px 0;">{{ "%.2f"|format(report.current_assets.cash_and_bank|float) }}</td>
                </tr>
                {% if report.current_assets.vendor_advances != 0 %}
                <tr>
                    <td style="padding: 3px 0;">Vendor Advances</td>
                    <td style="text-align: right; padding: 3px 0;">{{ "%.2f"|format(report.current_assets.vendor_advances|float) }}</td>
                </tr>
                {% endif %}
                {% if report.current_assets.other_current_assets != 0 %}
                <tr>
                    <td style="padding: 3px 0;">Other Current Assets</td>
                    <td style="text-align: right; padding: 3px 0;">{{ "%.2f"|format(report.current_assets.other_current_assets|float) }}</td>
                </tr>
                {% endif %}
                <tr style="background-color: #f8fafc;">
                    <td style="padding: 5px 0; font-weight: 500;">Total Current Assets</td>
                    <td style="text-align: right; padding: 5px 0; font-weight: 500;">{{ "%.2f"|format(report.current_assets.total|float) }}</td>
                </tr>
            </table>
            
            <!-- Total Assets -->
            <div style="background-color: #dbeafe; padding: 8px; margin-top: 10px; border-radius: 4px;">
                <table style="width: 100%;">
                    <tr>
                        <td style="font-weight: bold; color: #1e40af; font-size: 12px;">TOTAL ASSETS</td>
                        <td style="text-align: right; font-weight: bold; color: #1e40af; font-size: 12px;">{{ "%.2f"|format(report.total_assets|float) }}</td>
                    </tr>
                </table>
            </div>
        </td>
        
        <!-- EQUITY & LIABILITIES COLUMN -->
        <td style="width: 50%; vertical-align: top; padding-left: 15px;">
            <h3 style="margin: 0 0 10px 0; font-size: 13px; color: #166534; border-bottom: 2px solid #166534; padding-bottom: 5px;">EQUITY & LIABILITIES</h3>
            
            <!-- Liabilities -->
            <h4 style="margin: 10px 0 5px 0; font-size: 11px; color: #666; text-transform: uppercase;">Liabilities</h4>
            <table style="width: 100%; margin-bottom: 5px;">
                <tr>
                    <td style="padding: 3px 0;">Accounts Payable</td>
                    <td style="text-align: right; padding: 3px 0;">{{ "%.2f"|format(report.liabilities.accounts_payable|float) }}</td>
                </tr>
                <tr>
                    <td style="padding: 3px 0;">Payroll Liabilities</td>
                    <td style="text-align: right; padding: 3px 0;">{{ "%.2f"|format(report.liabilities.payroll_liabilities|float) }}</td>
                </tr>
                <tr>
                    <td style="padding: 3px 0 3px 15px; color: #666;">- PAYE Payable</td>
                    <td style="text-align: right; padding: 3px 0;">{{ "%.2f"|format(report.liabilities.paye_payable|float) }}</td>
                </tr>
                <tr>
                    <td style="padding: 3px 0 3px 15px; color: #666;">- Pension Payable</td>
                    <td style="text-align: right; padding: 3px 0;">{{ "%.2f"|format(report.liabilities.pension_payable|float) }}</td>
                </tr>
                <tr>
                    <td style="padding: 3px 0;">VAT Payable (Output VAT)</td>
                    <td style="text-align: right; padding: 3px 0;">{{ "%.2f"|format(report.liabilities.vat_payable|float) }}</td>
                </tr>
                {% if report.liabilities.customer_advances != 0 %}
                <tr>
                    <td style="padding: 3px 0;">Customer Advances</td>
                    <td style="text-align: right; padding: 3px 0;">{{ "%.2f"|format(report.liabilities.customer_advances|float) }}</td>
                </tr>
                {% endif %}
                {% if report.liabilities.other_liabilities != 0 %}
                <tr>
                    <td style="padding: 3px 0;">Other Liabilities</td>
                    <td style="text-align: right; padding: 3px 0;">{{ "%.2f"|format(report.liabilities.other_liabilities|float) }}</td>
                </tr>
                {% endif %}
                <tr style="background-color: #f8fafc;">
                    <td style="padding: 5px 0; font-weight: 500;">Total Liabilities</td>
                    <td style="text-align: right; padding: 5px 0; font-weight: 500;">{{ "%.2f"|format(report.liabilities.total|float) }}</td>
                </tr>
            </table>
            
            <!-- Equity -->
            <h4 style="margin: 15px 0 5px 0; font-size: 11px; color: #666; text-transform: uppercase;">Equity</h4>
            <table style="width: 100%; margin-bottom: 5px;">
                <tr>
                    <td style="padding: 3px 0;">Owner's Equity</td>
                    <td style="text-align: right; padding: 3px 0;">{{ "%.2f"|format(report.equity.owners_equity|float) }}</td>
                </tr>
                <tr>
                    <td style="padding: 3px 0;">Retained Earnings (Current Period)</td>
                    <td style="text-align: right; padding: 3px 0;">{{ "%.2f"|format(report.equity.current_period_earnings|float) }}</td>
                </tr>
                {% if report.equity.retained_earnings != 0 %}
                <tr>
                    <td style="padding: 3px 0;">Retained Earnings (Prior Periods)</td>
                    <td style="text-align: right; padding: 3px 0;">{{ "%.2f"|format(report.equity.retained_earnings|float) }}</td>
                </tr>
                {% endif %}
                {% if report.equity.opening_balance_equity != 0 %}
                <tr>
                    <td style="padding: 3px 0;">Opening Balance Equity</td>
                    <td style="text-align: right; padding: 3px 0;">{{ "%.2f"|format(report.equity.opening_balance_equity|float) }}</td>
                </tr>
                {% endif %}
                <tr style="background-color: #f8fafc;">
                    <td style="padding: 5px 0; font-weight: 500;">Total Equity</td>
                    <td style="text-align: right; padding: 5px 0; font-weight: 500;">{{ "%.2f"|format(report.equity.total|float) }}</td>
                </tr>
            </table>
            
            <!-- Total Equity & Liabilities -->
            <div style="background-color: #dcfce7; padding: 8px; margin-top: 10px; border-radius: 4px;">
                <table style="width: 100%;">
                    <tr>
                        <td style="font-weight: bold; color: #166534; font-size: 12px;">TOTAL EQUITY & LIABILITIES</td>
                        <td style="text-align: right; font-weight: bold; color: #166534; font-size: 12px;">{{ "%.2f"|format(report.total_equity_and_liabilities|float) }}</td>
                    </tr>
                </table>
            </div>
        </td>
    </tr>
</table>

<!-- Balance Check -->
{% set diff = (report.total_assets|float - report.total_equity_and_liabilities|float)|abs %}
{% if diff > 0.01 %}
<div style="margin-top: 15px; padding: 10px; background-color: #fef3c7; border: 1px solid #f59e0b; border-radius: 4px;">
    <p style="margin: 0; color: #92400e; font-size: 11px;">
        <strong>Warning:</strong> Balance Sheet difference of {{ "%.2f"|format(diff) }} detected. Please review your journal entries.
    </p>
</div>
{% else %}
<div style="margin-top: 15px; padding: 10px; background-color: #d1fae5; border: 1px solid #10b981; border-radius: 4px;">
    <p style="margin: 0; color: #065f46; font-size: 11px;">
        <strong>Balanced:</strong> Assets equal Equity & Liabilities âœ“
    </p>
</div>
{% endif %}
{% endblock %}
